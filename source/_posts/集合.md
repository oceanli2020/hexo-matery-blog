---
title: 集合
top: false
cover: false
toc: true
mathjax: true
date: 2021-03-14 09:48:21
password:
summary:
tags:
  - Java
  - 集合
categories:
  - Java
---

## 集合

Collection 接口：
`List`接口：有序、可重复，实现类有 Vector、ArrayList、LinkedList
`Set`接口：无序、不可重复，实现类有 HashSet、LinkHashSet、TreeSet
`Queue`接口：队列，实现类为 LinkedList

Map 接口：实现类有 HashMap、HashTable、LinkedHashMap、ConcurrentHashMap、TreeMap

其中 ArrayList 和 Vector 使用了数组实现，Vector 是线程安全的，ArrayList 线程不安全，LinkedList 使用了双向循环链表实现

**重写 hashCode()和 equals()**

- 为什么要重写？
  1. HashSet 存放元素时，先根据元素 hashCode 值快速找到要存储的位置，若该位置有元素，两个对象通过 equals()进行比较，返回 true 则不放入，若为 false 则会以链表的形式在同一个位置存放两个元素，这样会使 HashSet 性能降低，因为不能快速定位了
  2. 若 hashCode 值不同，但 equlas()返回 true，会导致 HashSet 存入两个相同的对象，无法保证唯一性
- 重写时要注意什么：最好让 hashCode 值不重复，使 Hash 表分布均匀，便于快速定位

Map 的存储结构：Hash 表+链表+红黑树

HashMap、HashTable、ConcurrentHashMap

- HashMap 线程不安全，允许 key/value 为空
- HashTable 线程安全，不允许 key/value 为空，效率较低
- ConcurrentHashMap 线程安全，效率很高

LinkHashSet、LinkedHashMap 内部增加了一个链表，用于存放元素的顺序，使迭代出来的顺序和存入顺序一致

TreeSet、TreeMap 基于红黑树实现

HashSet 基于 HashMap 实现

对于重复元素，HashSet 不存，HashMap 覆盖
