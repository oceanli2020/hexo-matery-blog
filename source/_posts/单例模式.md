---
title: 单例模式
top: false
cover: false
toc: true
mathjax: true
date: 2021-03-14 15:00:25
password:
summary:
tags:
  - Java
  - 设计模式
categories:
  - Java
---

## 单例模式

**保证一个类在内存中仅有一个实例**

优点：

- 在内存中只有一个实例，可以减少内存开支，节约系统资源
- 避免对共享资源的多重占用

缺点：

- 在多线程下要考虑线程安全问题

**实现方式：**

饿汉式：类初始化时，会立即加载该对象，线程天生安全，调用效率高

```java
public class Demo {
    private static Demo demo = new Demo();
    private Demo(){}
    public static Demo getDemo(){
        return demo;
    }
}
```

懒汉式：当需要时，才会去创建对象，在多线程环境下保证线程安全需要加锁，效率较低

```java
public class Demo{
    private static Demo demo;
    private Demo(){}
    public static synchronized Demo getDemo(){
        if(demo == null){
            demo = new Demo();
        }
        return demo;
    }
}
```

双重检测锁：在多线程环境下，保证线程安全且不影响程序的性能

```java
public class Demo{
    private static Demo demo;
    private Demo(){}
    public static Demo getDemo(){
        if(demo == null){
            synchronized(Demo.class){
                if(demo == null){
                    demo = new Demo();
                }
            }
        }
        return demo;
    }
}
```
