---
title: 计算机网络
top: true
cover: true
toc: true
mathjax: true
date: 2021-03-14 13:40:21
password:
summary:
tags:
  - Java
  - 计算机网络
categories:
  - Java
---

### 计算机网络

**体系结构**

应用层：DNS、HTTP、SMTP、FTP
传输层：TCP、UDP
网络层：IP
数据链路层
物理层

**TCP 和 UDP 的区别**

`TCP`协议面向连接，可靠传输，面向字节流，效率低，实现了流量控制、拥塞控制
`UDP`协议无连接，不可靠传输，可能出现丢包现象，以数据报作为基本单位收发，效率高

**TCP 报文段：首部+数据**

首部 20 个字节，包括序号 seq，确认号 ack，ACK，SYN，FIN 等字段，源端口号，目的端口号等序号 seq 表示所要发生的数据的第一个数据字节的序号

确认号 ack 表示对已收到的数据的最高序号加 1，即期望下次收到的数据中第一个数据字节的序号

ACK=1 时，ack 才有效

SYN=1 时，表示这是一个连接请求或连接接受的报文

FIN=1 时，表示此报文段的发送端已发送完毕，并要求释放连接

**TCP 如何做到可靠传输？如果发送数据，没有接受到 ACK 确认会怎样？**

- 确认应答+序列号：TCP 传输过程中，每次接收方收到报文后，都会对发送方进行确认应答，也就是发送 ACK 报文，这个 ACK 报文会带有确认号 ack，告诉发送方，接收到了哪些数据，下一次的数据从哪里开始继续发。其次，接收方可以根据报文首部的序号对数据包进行排序和去重，然后把数据传送给应用层。

- 超时重传：发送方发出数据后，会开启一个计时器，当一定时间后还未收到 ACK 确认报文，则重发数据，直到达到重发次数或收到 ACK，累计到一定的重传次数，TCP 会认为网络异常，强制关闭连接。

- 快速重传：当接受方收到的数据包序号不正确，那么接受方会重复发送上一条 ACK 确认报文，若发送方连续收到了 3 条同一个确认号的 ACK，就会启动快速重传，把这个 ACK 对应的发送包重新发送。

- 滑动窗口：滑动窗口的发送窗口，未收到 ACK 确认就不滑动
  `发送窗口`：已发送，未收到 ACK、未发送，但允许发送
  `接受窗口`：未接收但准备接收

**TCP 如何做到数据不重复？**

接收方可以根据报文首部的序号对数据包进行排序和去重，然后把数据传送给应用层。

**三次握手，建立连接**

![三次握手](https://i.loli.net/2021/03/14/sqhkOBnNRfvzWaU.png)**四次挥手，释放连接**

![四次挥手](https://i.loli.net/2021/03/14/mjuFKYNizyHp1VS.png)
